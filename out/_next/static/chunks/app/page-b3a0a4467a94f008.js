(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8444:function(e,t,o){Promise.resolve().then(o.bind(o,2134))},2134:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return Index}});var s=o(7437),n=o(2265),i=o(220),a=o(2173),l=o(429),r=o.n(l);function LoginPage(){let[e,t]=(0,n.useState)([]),[o,l]=(0,n.useState)(),[u,c]=(0,n.useState)([]),d=(0,i.Nq)({onSuccess:e=>authUserData(e.access_token),onError:e=>console.log("Login Failed:",e)}),authUserData=async e=>{t((await a.Z.post("http://localhost:3000/google-login",{access_token:e},{withCredentials:!0})).data),fetchData()},parseCookies=()=>{var e=document.cookie.split(";"),t={};return e.forEach(function(e){var o=e.trim().split("="),s=o[0],n=o[1];t[s]=n}),t},getCookieByName=e=>parseCookies()[e],fetchData=async()=>{let e=getCookieByName("f.session");if(console.log(e,"---sessionid---"),e){let e=await a.Z.get("http://localhost:3000/videos",{withCredentials:!0}),t=e.data.data;c(t)}else t(null)};(0,n.useEffect)(()=>{fetchData()},[e]);let pushToYoutube=async()=>{console.log((await a.Z.post("http://localhost:3000/push-to-youtube",{},{withCredentials:!0})).data)},uploadVideo=async e=>{try{e.preventDefault();let t=new FormData;t.append("file",o);let s=await a.Z.post("http://localhost:3000/upload",t,{withCredentials:!0});if(200==s.status){let e=await a.Z.get("http://localhost:3000/videos",{withCredentials:!0}),t=e.data.data;c(t)}else alert("failed to upload video")}catch(e){console.log(e)}};return(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:e.picture,alt:"user image"}),(0,s.jsx)("h3",{children:"User Logged in"}),(0,s.jsxs)("p",{children:["Name: ",e.name]}),(0,s.jsxs)("p",{children:["Email Address: ",e.email]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{style:{backgroundColor:"green",width:130,height:50,fontSize:20},onClick:()=>{(0,i.Kz)(),t(null)},children:"Log out"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("input",{type:"file",name:"file",id:"file",required:!0,onChange:e=>{l(e.target.files[0])}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{style:{backgroundColor:"green",width:230,height:50,fontSize:20},onClick:uploadVideo,children:"Upload Video"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),u&&u.length?u.map(e=>(0,s.jsx)(r(),{light:!0,controls:!0,url:e.url},e.url)):"",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{style:{backgroundColor:"red",width:230,height:50,fontSize:20},onClick:pushToYoutube,children:"Push to Youtube"})]}):(0,s.jsx)("button",{onClick:()=>d(),children:"Sign in with Google \uD83D\uDE80 "})})}async function Index(){return(0,s.jsx)(n.StrictMode,{children:(0,s.jsx)(i.rg,{clientId:"991721113010-kjq22snhb1vrehjpqaq7eevknu5j6cei.apps.googleusercontent.com",children:(0,s.jsx)(LoginPage,{})})})}}},function(e){e.O(0,[719,971,864,744],function(){return e(e.s=8444)}),_N_E=e.O()}]);