(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8444:function(e,t,n){Promise.resolve().then(n.bind(n,2134))},2134:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Index}});var s=n(7437),a=n(2265),i=n(220),r=n(2173),o=n(429),l=n.n(o);function LoginPage(){let[e,t]=(0,a.useState)([]),[n,o]=(0,a.useState)(),[d,c]=(0,a.useState)([]),u=(0,i.Nq)({onSuccess:e=>authUserData(e.access_token),onError:e=>console.log("Login Failed:",e)}),authUserData=async e=>{t((await r.Z.post("https://freetrade.tk/google-login",{access_token:e},{withCredentials:!0})).data),fetchData()},parseCookies=()=>{var e=document.cookie.split(";"),t={};return e.forEach(function(e){var n=e.trim().split("="),s=n[0],a=n[1];t[s]=a}),t},getCookieByName=e=>parseCookies()[e],fetchData=async()=>{if(getCookieByName("f.session")){let e=await r.Z.get("https://freetrade.tk/videos",{withCredentials:!0}),t=e.data.data;c(t)}else t(null)};(0,a.useEffect)(()=>{fetchData()},[e]);let uploadVideo=async e=>{try{e.preventDefault();let t=new FormData;t.append("file",n);let s=await r.Z.post("https://freetrade.tk/upload",t,{withCredentials:!0});if(200==s.status){let e=await r.Z.get("https://freetrade.tk/videos",{withCredentials:!0}),t=e.data.data;c(t)}else alert("failed to upload video")}catch(e){console.log(e)}};return(0,s.jsx)(s.Fragment,{children:e?(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:e.picture,alt:"user image"}),(0,s.jsx)("h3",{children:"User Logged in"}),(0,s.jsxs)("p",{children:["Name: ",e.name]}),(0,s.jsxs)("p",{children:["Email Address: ",e.email]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{style:{backgroundColor:"green",width:130,height:50,fontSize:20},onClick:()=>{(0,i.Kz)(),t(null)},children:"Log out"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("input",{type:"file",name:"file",id:"file",required:!0,onChange:e=>{o(e.target.files[0])}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("button",{style:{backgroundColor:"green",width:230,height:50,fontSize:20},onClick:uploadVideo,children:"Upload Video"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),d&&d.length?d.map(e=>(0,s.jsx)(l(),{light:!0,controls:!0,url:e.url},e.url)):""]}):(0,s.jsx)("button",{onClick:()=>u(),children:"Sign in with Google \uD83D\uDE80 "})})}async function Index(){return(0,s.jsx)(a.StrictMode,{children:(0,s.jsx)(i.rg,{clientId:"991721113010-kjq22snhb1vrehjpqaq7eevknu5j6cei.apps.googleusercontent.com",children:(0,s.jsx)(LoginPage,{})})})}}},function(e){e.O(0,[719,971,864,744],function(){return e(e.s=8444)}),_N_E=e.O()}]);